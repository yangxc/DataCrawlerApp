<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- Bootstrap -->
<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
<link th:href="@{/css/bootstrap-datetimepicker.min.css}"
	rel="stylesheet" media="screen" />
<title>知识工程</title>
	<script th:src="@{/js/jquery.js}" type="text/javascript"></script>
	<script th:src="@{/js/bootstrap.js}" type="text/javascript"></script>
	<script th:inline="javascript">
		/*<![CDATA[*/
		$(document).ready(function () {
			$("#deleteGroup").click(function () {
				var groupIds = '';
				$("input[name='checkbox']:checkbox:checked").each(function() {
					groupIds += $(this).val() + ',';
				});
				if (groupIds == '') {
					alert("Error:no one selected.");
				} else {
					// 开始任务
					$.ajax({
						url : "/taskgroup/removeTaskGroup",
						cache: false,
						async: false,
						type : "POST",
						dataType : "json",
						contentType : "application/json; charset=utf-8",
						data : groupIds,
						success : function(msg) {
						},
						error : function(msg) {
							//200的响应也有可能被认定为error，responseText中没有Message部分
						}
					});
					alert('删除成功！');
					$("#groupForm").submit();
				}
				
			});

		});
		/*]]>*/
	</script>
</head>
<body>
	<!-- 头部导航 -->
	<nav class="navbar navbar-default" role="navigation"
		style="margin-bottom: 0; height: 60px"
		th:include="fragments/header :: #header">头部导航</nav>
	<!-- 2 10布局 -->
	<div class="row" style="padding-left: 0; padding-right: 0;">
		<div class="col-md-2" style="padding-left: 0; padding-right: 0; margin-bottom: 0;">
			<!-- 左侧导航 -->
			<nav class="navbar navbar-default" role="navigation"
				style="height: 600px; margin-bottom: 0;" th:include="fragments/leftmenu :: #leftmenu">
				左侧导航
			</nav>
		</div>
		<div class="col-md-10" style="padding-left: 0">
			<!-- 右侧头部导航1 -->
			<nav class="navbar navbar-default" role="navigation"
				style="margin-bottom: 0; height: 30px;">
				<div>
					<p class="navbar-text" style="color: black;"><span th:text="${group.groupName}"></span></p>
					<form class="navbar-form navbar-right" role="search">
						<span class="navbar-text"><span th:text="${groupNum}"></span>个文件夹，
						<span><span th:text="${taskNum}"></span></span>个任务</span>
					</form>
				</div>
			</nav>
			<!-- 任务组操作 -->
			<nav class="navbar navbar-default" role="navigation"
				style="margin-bottom: 0; height: 30px;">
				<div>
					<form id="groupForm" class="navbar-form navbar-left" role="search" th:action="@{/taskgroup/taskgroups(groupId=${groupId})}">
						<input type="hidden" name="groupId" th:value="${groupId}"/>
						<button type="button" id="deleteGroup" class="btn btn-default btn-sm">删除</button>
						<a th:href="@{/taskgroup/renameGroupPage/(groupId=${groupId})}" class="btn btn-default btn-sm" data-toggle="modal"
							data-target="#theModal" style="width: 120px;">重命名</a>
						
					</form>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<form class="navbar-form navbar-right" method="get" style="margin-top: -12px; margin-right: 0px; padding-left: 700px;" role="search">
						<a th:href="@{/taskgroup/createTaskGroupPage(groupId=${groupId})}" class="btn btn-primary" data-toggle="modal"
							data-target="#theModal" style="width: 120px;">新建分组</a>
					</form>
				</div>
			</nav>
			<!-- 任务组操作 -->
			<!-- 任务组列表 -->
			<div class="row" style="padding-left: 0; padding-right: 0; height: 200px;">
				<div class="col-md-12" style="padding-left: 40px;">
					<table class="table">
						<tbody>
							<tr th:unless="${#lists.isEmpty(taskGroups)}">
								<td th:each=" taskGroup : ${taskGroups}" width="200">
									<input name="checkbox" type="checkbox" th:value="${taskGroup.groupId}"/>
									 &nbsp;
									<span th:class="${taskGroup.ifLeaf == '1'}?'glyphicon glyphicon-folder-close':'glyphicon glyphicon-folder-open'"></span>
									<a th:href="@{/taskgroup/taskgroups(groupId=${taskGroup.groupId})}">
										<span th:text="${taskGroup.groupName}"></span>
									</a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<!-- 任务组列表 -->
			<!-- 右侧头部导航2 -->
			<nav class="navbar navbar-default" role="navigation"
				style="margin-bottom: 0; height: 50px;">
				<div>
					<!--向左对齐-->
					<form class="navbar-form navbar-left" role="search">
						<button type="button" class="btn btn-default btn-sm">
							<span class="glyphicon glyphicon-play"></span> 开始
						</button>
						&nbsp; &nbsp;
						<button type="button" class="btn btn-default btn-sm">
							<span class="glyphicon glyphicon-pause"></span> 暂停
						</button>
						&nbsp; &nbsp;
						<button type="button" class="btn btn-default btn-sm">
							<span class="glyphicon glyphicon-stop"></span> 停止
						</button>
						&nbsp; &nbsp;
						<button type="button" class="btn btn-default btn-sm">
							<span class="glyphicon glyphicon-remove"></span> 删除
						</button>
					</form>
					<!--向右对齐-->
					<form class="navbar-form navbar-right" role="search">
						<div class="form-group">
							<select class="form-control input-sm" style="width: 120px;">
								<option value="">全部</option>
								<option value="">就绪</option>
								<option value="">运行中</option>
								<option value="">已完成</option>
								<option value="">已暂停</option>
								<option value="">已停止</option>
							</select>
						</div>
						&nbsp; &nbsp; &nbsp; &nbsp;
						<a th:href="@{/task/createTaskPage(groupId=${groupId})}" class="btn btn-success" 
					data-toggle="modal" data-target="#theModal" style="width: 120px;">新建采集</a>
						&nbsp; &nbsp;
					</form>
				</div>
			</nav>
			<!-- 右侧表单  -->
			<table class="table table-hover">
				<tbody>
					<tr>
						<td width="35"><input type="checkbox" /></td>
						<td><p>石油钻探技术新闻</p>
							<span style="font-size: 12px; color: #808080">所属分组:</span><span
							style="font-size: 12px;"> 新闻类</span></td>
						<td><span style="font-size: 12px; color: #808080">任务状态:</span><span
							style="font-size: 12px; color: green;"> 进行中</span></td>
						<td><span style="font-size: 12px; color: #808080">创建时间:
								2015-4-24 11：22：11</span></td>
						<td>
							<div class="panel panel-default"
								style="width: 100px; height: 50px;">
								<div class="panel-heading"
									style="height: 25px; padding: 5px 23px;">
									<span style="font-size: 12px;">采集数量</span>
								</div>
								<div class="panel-body" style="height: 25px; padding: 5px 27px;">
									1,200</div>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
			<div style="height: 50px; margin-top: -20px;">

				<ul class="pagination" style="padding-left: 30%">
					<li><a href="#">&laquo;</a></li>
					<li><a href="#">1</a></li>
					<li><a href="#">2</a></li>
					<li><a href="#">3</a></li>
					<li><a href="#">4</a></li>
					<li><a href="#">5</a></li>
					<li><a href="#">&raquo;</a></li>
				</ul>
			</div>
		</div>
	</div>

	<div class="row" style="padding-left: 0; padding-right: 0;">
		<div class="col-md-12" style="padding-left: 0">
			<nav class="navbar navbar-default" role="navigation" style="margin-bottom: 0; height: 50px; text-align: center;"
				th:include="fragments/footer :: #footer">
				注脚
			</nav>
		</div>
	</div>
	<script type="text/javascript" src="../js/taskJob.js"></script>
	<!-- 显示模态对话框 -->
	<div class="modal fade" id="theModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content"></div>
		</div>
	</div>
</body>
</html>